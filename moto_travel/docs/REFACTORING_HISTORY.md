# æ¶æ„é‡æ„å†å²

## ğŸ“‹ é‡æ„æ¦‚è¿°

é¡¹ç›®ä»å•Agentæ¶æ„é‡æ„ä¸ºå¤šAgentååŒæ¶æ„ï¼Œé‡‡ç”¨A2Aåè®®è¿›è¡ŒAgenté—´é€šä¿¡ã€‚

## âœ… å·²å®Œæˆçš„é‡æ„

### 1. A2Aåè®®å®ç° âœ…
- **æ–‡ä»¶**: `app/agents/base/`
  - `message.py` - æ¶ˆæ¯å®šä¹‰ï¼ˆRequest/Response/Notificationï¼‰
  - `a2a_protocol.py` - A2Aåè®®å®ç°ï¼ˆå†…å­˜ç‰ˆæœ¬ï¼‰
  - `agent.py` - AgentåŸºç±»ï¼ˆæ”¯æŒA2Aï¼‰

### 2. è·¯å¾„è§„åˆ’Agenté‡æ„ âœ…
- **ç›®å½•**: `app/agents/route_planning/`
- **åŠŸèƒ½**:
  - âœ… é›†æˆé«˜å¾·åœ°å›¾API
  - âœ… é›†æˆç™¾åº¦åœ°å›¾API
  - âœ… è·¯çº¿å¯¹æ¯”å’Œåˆå¹¶
  - âœ… æ‘©æ—…ä¸“ç”¨è·¯çº¿åˆ†æ
  - âœ… åŠ æ²¹ç«™è§„åˆ’
  - âœ… é«˜é€Ÿå…¬è·¯æ£€æµ‹
  - âœ… å›½é“çœé“è¯†åˆ«

### 3. å¤©æ°”æŸ¥è¯¢Agenté‡æ„ âœ…
- **ç›®å½•**: `app/agents/weather/`
- **åŠŸèƒ½**:
  - âœ… å®æ—¶å¤©æ°”æŸ¥è¯¢
  - âœ… å¤©æ°”é¢„æŠ¥ï¼ˆé€å°æ—¶/é€æ—¥ï¼‰
  - âœ… å¤©æ°”é¢„è­¦
  - âœ… æ‘©æ—…å®‰å…¨è¯„ä¼°
  - âœ… A2Aåè®®æ”¯æŒ

### 4. POIæŸ¥è¯¢Agenté‡æ„ âœ…
- **ç›®å½•**: `app/agents/poi/`
- **åŠŸèƒ½**:
  - âœ… POIæœç´¢ï¼ˆé¤å…ã€é…’åº—ã€åŠ æ²¹ç«™ã€ä¿®è½¦è¡Œï¼‰
  - âœ… ç¦æ‘©æ”¿ç­–æ£€æŸ¥
  - âœ… åŠ æ²¹ç«™è§„åˆ’
  - âœ… è·¯çº¿æ”¿ç­–æ£€æŸ¥
  - âœ… A2Aåè®®æ”¯æŒ

### 5. é…’åº—Agentå®ç° âœ…
- **ç›®å½•**: `app/agents/hotel/`
- **åŠŸèƒ½**:
  - âœ… å¤šæ•°æ®æºæ”¯æŒï¼ˆç¾å›¢ã€æºç¨‹ã€åŒç¨‹ã€å»å“ªã€é£çŒªï¼‰
  - âœ… ç”¨æˆ·è®¤è¯ï¼ˆæ‰‹æœºå·+éªŒè¯ç ï¼‰
  - âœ… ReActæ¨¡å¼æŸ¥è¯¢
  - âœ… é…’åº—æœç´¢ã€é¢„è®¢ã€é€€è®¢
  - âœ… A2Aåè®®æ”¯æŒ

## ğŸ“ æ–°æ¶æ„ç›®å½•ç»“æ„

```
app/agents/
â”œâ”€â”€ base/                    # AgentåŸºç¡€æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ agent.py            # AgentåŸºç±»
â”‚   â”œâ”€â”€ a2a_protocol.py     # A2Aåè®®
â”‚   â””â”€â”€ message.py          # æ¶ˆæ¯å®šä¹‰
â”‚
â”œâ”€â”€ route_planning/          # è·¯å¾„è§„åˆ’Agent
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ agent.py
â”‚   â”œâ”€â”€ tools/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ amap_tool.py    # é«˜å¾·åœ°å›¾å·¥å…·
â”‚   â”‚   â””â”€â”€ baidu_tool.py   # ç™¾åº¦åœ°å›¾å·¥å…·
â”‚   â””â”€â”€ strategies/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ moto_route_strategy.py  # æ‘©æ—…è·¯çº¿ç­–ç•¥
â”‚       â””â”€â”€ route_merger.py         # è·¯çº¿åˆå¹¶ç­–ç•¥
â”‚
â”œâ”€â”€ weather/                # å¤©æ°”æŸ¥è¯¢Agent
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ agent.py
â”‚   â””â”€â”€ tools/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ weather_tool.py      # å¤©æ°”å·¥å…·
â”‚       â””â”€â”€ weather_analyzer.py  # å¤©æ°”åˆ†æå™¨
â”‚
â”œâ”€â”€ poi/                    # POIæŸ¥è¯¢Agent
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ agent.py
â”‚   â””â”€â”€ tools/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ poi_tool.py         # POIå·¥å…·
â”‚       â”œâ”€â”€ poi_analyzer.py     # POIåˆ†æå™¨
â”‚       â””â”€â”€ policy_checker.py  # ç¦æ‘©æ”¿ç­–æ£€æŸ¥å™¨
â”‚
â””â”€â”€ hotel/                  # é…’åº—Agent
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ agent.py
    â””â”€â”€ tools/
        â”œâ”€â”€ __init__.py
        â”œâ”€â”€ meituan_tool.py     # ç¾å›¢å·¥å…·
        â”œâ”€â”€ ctrip_tool.py       # æºç¨‹å·¥å…·
        â”œâ”€â”€ tongcheng_tool.py   # åŒç¨‹å·¥å…·
        â”œâ”€â”€ qunar_tool.py       # å»å“ªå„¿å·¥å…·
        â”œâ”€â”€ fliggy_tool.py      # é£çŒªå·¥å…·
        â”œâ”€â”€ hotel_analyzer.py   # é…’åº—åˆ†æå™¨
        â””â”€â”€ hotel_filter.py     # é…’åº—ç­›é€‰å™¨
```

## ğŸ”Œ A2Aåè®®ä½¿ç”¨ç¤ºä¾‹

### Agenté—´é€šä¿¡

```python
from app.agents.route_planning import RoutePlanningAgent
from app.agents.weather import WeatherAgent
from app.agents.poi import POIAgent

# åˆå§‹åŒ–Agent
route_agent = RoutePlanningAgent()
weather_agent = WeatherAgent()
poi_agent = POIAgent()

# 1. è§„åˆ’è·¯çº¿
route_response = await route_agent.send_request(
    to_agent="route_planning",
    action="plan_route",
    payload={
        "origin": "åŒ—äº¬",
        "destination": "ä¸Šæµ·",
        "avoid_highway": True
    }
)

if route_response.success:
    route_data = route_response.payload
    
    # 2. æŸ¥è¯¢æ²¿é€”å¤©æ°”
    weather_response = await weather_agent.send_request(
        to_agent="weather",
        action="get_weather",
        payload={"location": "åŒ—äº¬"}
    )
    
    # 3. æ£€æŸ¥ç¦æ‘©æ”¿ç­–
    policy_response = await poi_agent.send_request(
        to_agent="poi",
        action="check_policy",
        payload={
            "route_segments": route_data["final_route"]["steps"]
        }
    )
```

## ğŸï¸ æ‘©æ—…ä¸“ç”¨åŠŸèƒ½

### 1. è·¯å¾„è§„åˆ’
- âœ… åŒåœ°å›¾å¯¹æ¯”ï¼ˆé«˜å¾·+ç™¾åº¦ï¼‰
- âœ… é«˜é€Ÿå…¬è·¯æ£€æµ‹
- âœ… å›½é“çœé“è¯†åˆ«
- âœ… è·¯çº¿é€‚åˆåº¦è¯„ä¼°
- âœ… åŠ æ²¹ç«™è§„åˆ’ï¼ˆæ¯300kmï¼‰

### 2. å¤©æ°”æŸ¥è¯¢
- âœ… å®æ—¶å¤©æ°”
- âœ… å¤©æ°”é¢„æŠ¥
- âœ… å¤©æ°”é¢„è­¦
- âœ… æ‘©æ—…å®‰å…¨è¯„ä¼°
- âœ… è£…å¤‡å»ºè®®

### 3. POIæŸ¥è¯¢
- âœ… åŠ æ²¹ç«™æœç´¢
- âœ… é¤å…æœç´¢
- âœ… é…’åº—æœç´¢
- âœ… ä¿®è½¦è¡Œæœç´¢
- âœ… ç¦æ‘©æ”¿ç­–æ£€æŸ¥
- âœ… è·¯çº¿æ”¿ç­–æ£€æŸ¥

### 4. é…’åº—æœåŠ¡
- âœ… å¤šæ•°æ®æºæœç´¢
- âœ… ç”¨æˆ·è®¤è¯
- âœ… ReActæ¨¡å¼
- âœ… é…’åº—é¢„è®¢å’Œé€€è®¢

## ğŸ“Š åŠŸèƒ½å¯¹æ¯”

| åŠŸèƒ½ | æ—§æ¶æ„ | æ–°æ¶æ„ | æ”¹è¿› |
|------|--------|--------|------|
| Agenté€šä¿¡ | é€šè¿‡Router | A2Aåè®® | âœ… æ ‡å‡†åŒ–é€šä¿¡ |
| å·¥å…·ç»„ç»‡ | å…¨å±€toolsç›®å½• | æ¯ä¸ªAgentç‹¬ç«‹tools | âœ… æ¨¡å—åŒ– |
| åœ°å›¾æ”¯æŒ | ä»…é«˜å¾· | é«˜å¾·+ç™¾åº¦ | âœ… åŒåœ°å›¾å¯¹æ¯” |
| ç¦æ‘©æ£€æŸ¥ | æ—  | æœ‰ | âœ… æ”¿ç­–æ£€æŸ¥ |
| è·¯çº¿åˆ†æ | åŸºç¡€ | æ‘©æ—…ä¸“ç”¨ | âœ… ä¸“ä¸šåˆ†æ |
| é…’åº—æœåŠ¡ | æ—  | å¤šæ•°æ®æº+ReAct | âœ… å®Œæ•´æœåŠ¡ |

---

**é‡æ„å®Œæˆæ—¶é—´**: 2024-01-01  
**ç‰ˆæœ¬**: 2.0.0

